I"Ó
<h1 id="lets-encrypt-å­åŸŸåç»Ÿé…è¯ä¹¦ç”³è¯·">Letâ€™s Encrypt å­åŸŸåç»Ÿé…è¯ä¹¦ç”³è¯·</h1>
<blockquote>
  <p>ç»ˆäºç­‰æ¥äº†Letâ€™s Encrypté€šé…ç¬¦è¯ä¹¦äº†,çœ‹åˆ°è¿™é‡Œæ³ªæµæ»¡é¢o(<em>ï¿£ï¸¶ï¿£</em>)o,é‚£æˆ‘ä»¬æ¥å°å°é²œå§.</p>
</blockquote>

<h2 id="ç”³è¯·">ç”³è¯·</h2>
<ul>
  <li>ä¸‹è½½certbot-auto
    <ul>
      <li><code class="language-plaintext highlighter-rouge">wget https://dl.eff.org/certbot-auto</code></li>
    </ul>
  </li>
  <li>èµ‹äºˆå¯æ‰§è¡Œçš„æƒé™
    <ul>
      <li><code class="language-plaintext highlighter-rouge">chmod +x certbot-auto</code></li>
    </ul>
  </li>
  <li>ç”³è¯·è¯ä¹¦
    <ul>
      <li><code class="language-plaintext highlighter-rouge"> ./certbot-auto certonly  -d *.onew.me --manual --preferred-challenges dns --server https://acme-v02.api.letsencrypt.org/directory</code></li>
      <li>tip: -d å‚æ•°åé¢æ›´ä¸ŠåŸŸå è¿™é‡Œæˆ‘ä»¬åŠ ä¸Šé€šé…ç¬¦,è¿™é‡Œæˆ‘ä»¬é‡‡ç”¨çš„éªŒè¯æ–¹å¼æ˜¯dnséªŒè¯æ–¹å¼.</li>
    </ul>
  </li>
  <li>æ¥ä¸‹æ¥è·Ÿç€æç¤ºå¾€ä¸‹èµ°å°±å¯ä»¥äº†,æœ€åä¸€æ­¥è®°ä½è¯ä¹¦çš„ä½ç½®å°±å¯ä»¥äº†.</li>
</ul>

<h2 id="é…ç½®nginx">é…ç½®nginx</h2>
<p>æœ‰äº†è¯ä¹¦æˆ‘ä»¬éœ€è¦é…ç½®ä¸€ä¸‹nginx,æ‰èƒ½ä½¿è¯ä¹¦ç”Ÿæ•ˆ.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	
	server {
	    	  	  server_name onew.me;
	    		  location / {
	                        root /root/web/public;
	                        index index.html;
	      			  }
	            listen 443 ssl; # managed by Certbot
	            ssl_certificate /etc/letsencrypt/live/onew.me-0001/fullchain.pem;
	            ssl_certificate_key /etc/letsencrypt/live/onew.me-0001/privkey.pem;
	            ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; 
	            include /etc/letsencrypt/options-ssl-nginx.conf;        
         }
        
</code></pre></div></div>
<p>é‡å¯nginx å°±è¡Œäº†</p>

<h2 id="åˆ·æ–°è¯ä¹¦">åˆ·æ–°è¯ä¹¦</h2>
<p>Letâ€™s Encrypt çš„è¯ä¹¦æ˜¯ä¼šè¿‡æœŸçš„,ä¸€èˆ¬æ˜¯3ä¸ªæœˆ,åˆ°æœŸäº†æˆ‘ä»¬å°±è¦é‡æ–°ç”³è¯·,è¿™é‡Œæˆ‘ä»¬å†™ä¸ªå®šæ—¶ä»»åŠ¡æ¥é‡æ–°ç”³è¯·å°±å¥½äº†.</p>
<ul>
  <li>æ·»åŠ å®šæ—¶ä»»åŠ¡ <code class="language-plaintext highlighter-rouge">crontab -e</code></li>
  <li>æ·»åŠ æ‰§è¡Œè„šæœ¬ <code class="language-plaintext highlighter-rouge">* * * */3 *  root  /root/certbot-auto renew --quiet</code></li>
</ul>

<h2 id="æ€»ç»“">æ€»ç»“</h2>

<p>ç”³è¯·è¿‡ç¨‹è¿˜æ˜¯æŒºç®€å•çš„,ä½¿ç”¨nginxçš„è¯,å¯ä»¥ä½¿ç”¨certbotçš„nginx æ’ä»¶è¿›è¡Œè‡ªåŠ¨é…ç½®,ä½¿ç”¨èµ·æ¥ä¹Ÿå¾ˆç®€å•.åªä¸è¿‡è¦é¢„å…ˆä¸‹è½½å¥½è¿™ä¸ªæ’ä»¶.<code class="language-plaintext highlighter-rouge">yum install certbot-nginx -y</code>  å®‰è£…å¥½ä»¥åä½¿ç”¨<code class="language-plaintext highlighter-rouge">certbot --nginx</code>è¿›è¡Œè‡ªåŠ¨é…ç½®,æ¯ä¸€æ­¥éƒ½æœ‰æç¤ºçš„.</p>

:ET