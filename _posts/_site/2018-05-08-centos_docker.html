<h2 id="一删除旧版本的docker">一、删除旧版本的docker</h2>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>yum remove docker <span class="se">\</span>
                  docker-client <span class="se">\</span>
                  docker-client-latest <span class="se">\</span>
                  docker-common <span class="se">\</span>
                  docker-latest <span class="se">\</span>
                  docker-latest-logrotate <span class="se">\</span>
                  docker-logrotate <span class="se">\</span>
                  docker-selinux <span class="se">\</span>
                  docker-engine-selinux <span class="se">\</span>
                  docker-engine
</code></pre></div></div>

<blockquote>
  <p>注意,上面的命令将会彻底的移除docker,但是不包括之前创建的容器,镜像等</p>
</blockquote>

<h2 id="二yum在线安装docker">二、yum在线安装docker</h2>

<ol>
  <li>
    <p>安装必要的依赖</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>yum <span class="nb">install</span> <span class="nt">-y</span> yum-utils <span class="se">\</span>
  device-mapper-persistent-data <span class="se">\</span>
  lvm2
</code></pre></div>    </div>
  </li>
  <li>
    <p>设置yum repository</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yum-config-manager <span class="se">\</span>
    <span class="nt">--add-repo</span> <span class="se">\</span>
    https://download.docker.com/linux/centos/docker-ce.repo
</code></pre></div>    </div>
  </li>
  <li>
    <p>[可选]启用edge和test</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>yum-config-manager <span class="nt">--enable</span> docker-ce-edge <span class="c">#启用edge</span>
<span class="nb">sudo </span>yum-config-manager <span class="nt">--enable</span> docker-ce-test <span class="c">#启用test</span>
<span class="nb">sudo </span>yum-config-manager <span class="nt">--disable</span> docker-ce-edge <span class="c">#禁用edge</span>
<span class="nb">sudo </span>yum-config-manager <span class="nt">--disable</span> docker-ce-test <span class="c">#禁用test</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>安装docker <code class="language-plaintext highlighter-rouge">sudo yum install docker-ce</code></p>
  </li>
  <li>
    <p>启动docker <code class="language-plaintext highlighter-rouge">sudo systemctl start docker</code></p>
  </li>
  <li>
    <p>查看docker服务是否启动正常<code class="language-plaintext highlighter-rouge">sudo systemctl status docker</code> 看到状态为active说明是启动成功的</p>
  </li>
  <li>
    <p>如果要安装指定版本的docker,可以通过<code class="language-plaintext highlighter-rouge">yum list docker-ce --showduplicates</code>查看可以安装的版本号,然后通过<code class="language-plaintext highlighter-rouge">sudo yum install docker-ce-版本号</code>进行安装指定版本的docker</p>
  </li>
</ol>

<h2 id="三yun离线安装docker">三、yun离线安装docker</h2>

<ol>
  <li>
    <p>首先下载docker 的rpm包<code class="language-plaintext highlighter-rouge">https://download.docker.com/linux/centos/7/x86_64/stable/Packages/</code></p>

    <blockquote>
      <p>安装的过程中可能会遇到依赖的问题,请不要着急,一个一个的看好,去网上下载需要安装的依赖就可以了.</p>
    </blockquote>
  </li>
  <li>
    <p>使用命令<code class="language-plaintext highlighter-rouge">sudo yum install /path/to/package.rpm</code></p>
  </li>
  <li>
    <p>启动docker<code class="language-plaintext highlighter-rouge">sudo systemctl start docker</code></p>
  </li>
  <li>
    <p>查看docker 服务状态<code class="language-plaintext highlighter-rouge">sudo systemctl status docker</code>,如果状态是active说明是启动成功的</p>
  </li>
</ol>

<h2 id="四使用脚本安装docker">四、使用脚本安装docker</h2>

<blockquote>
  <p>如果不想手动一步一步的安装的话,docker官方提供了脚本安装的方式,但是这种方式需要root的权限</p>
</blockquote>

<ol>
  <li>下载脚本<code class="language-plaintext highlighter-rouge">curl -fsSL get.docker.com -o get-docker.sh</code></li>
  <li>运行脚本<code class="language-plaintext highlighter-rouge">sudo sh get-docker.sh</code>,跟着脚本一步一步的执行下去就可以了.感觉还是挺简单的.启动步骤跟上面的步骤是一样的,不再重复了.</li>
</ol>

<h2 id="五卸载docker">五、卸载docker</h2>

<ol>
  <li>
    <p>yum 卸载<code class="language-plaintext highlighter-rouge">sudo yum remove docker-ce</code></p>

    <blockquote>
      <p>这种方式不会删除配置文件等.</p>
    </blockquote>
  </li>
  <li>
    <p>删除镜像,容器等<code class="language-plaintext highlighter-rouge">sudo rm -rf /var/lib/docker</code></p>
  </li>
</ol>
