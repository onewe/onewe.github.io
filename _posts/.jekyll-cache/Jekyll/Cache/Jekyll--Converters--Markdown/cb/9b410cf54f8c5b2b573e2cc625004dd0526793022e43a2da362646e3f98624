I"Ó <h1 id="å‰è¨€">å‰è¨€</h1>
<blockquote>
  <p>å‰å‡ å¤©é‡åˆ°ä¸€ä¸ªéœ€æ±‚,é‚£å°±æ˜¯mqé˜Ÿåˆ—çš„åç§°è¦è·Ÿæœ¬æœºçš„ipåœ°å€ç›¸å…³,ç”±äºç”¨çš„æ˜¯springçš„streamæ¨¡å—æ¥è¿›è¡Œè¿æ¥mqçš„,æ‰€ä»¥ä¸èƒ½é€šè¿‡ä»£ç æ¥æŒ‡å®šé˜Ÿåˆ—çš„åç§°(åªæ˜¯æˆ‘ä¸çŸ¥é“æ€ä¹ˆé€šè¿‡ä»£ç æŒ‡å®šè€Œå·²â€¦é€ƒ),è¿™å¯æŠŠæˆ‘æ€¥åäº†,å› ä¸ºé˜Ÿåˆ—åç§°æ˜¯é€šè¿‡ymlé…ç½®æ–‡ä»¶æ¥çš„,äºæ˜¯æˆ‘å°±æƒ³èƒ½ä¸èƒ½å†é…ç½®æ–‡ä»¶ä¸Šé¢åšç‚¹æ–‡ç« .</p>
</blockquote>

<h1 id="æŸ¥èµ„æ–™">æŸ¥èµ„æ–™</h1>
<p>é€šè¿‡æŸ¥è¯¢springçš„ymlç›¸å…³èµ„æ–™,æ‰¾åˆ°äº†ç”Ÿæˆéšæœºæ•°å’Œuuidçš„åŠæ³•(è™½ç„¶ä¹‹å‰æˆ‘éƒ½çŸ¥é“äº†,æ— å¥ˆ),æ˜¾ç„¶æ˜¯ä¸ç¬¦åˆæˆ‘ä»¬éœ€æ±‚çš„,åœ¨çœ‹springå®˜æ–¹æ–‡æ¡£çš„è¿‡ç¨‹ä¸­,å‘ç°ymlæ˜¯å¯ä»¥è¯»å–ç¯å¢ƒå˜é‡çš„.è¿™æ„Ÿè§‰ä¸é”™,ä½†æ˜¯æœåŠ¡å™¨ä¸Šé¢æœ‰å…³äºæœ¬æœºipåœ°å€çš„ç¯å¢ƒå˜é‡å—??æœ‰æ²¡æœ‰æˆ‘æ˜¯ä¸çŸ¥é“çš„.äºæ˜¯äº§ç”Ÿäº†æ‰‹åŠ¨è®¾ç½®ç¯å¢ƒå˜é‡çš„æƒ³æ³•.</p>

<h1 id="å®ç°æ€è·¯">å®ç°æ€è·¯</h1>
<p>åªè¦åœ¨springè¯»å–é…ç½®æ–‡ä»¶ä¹‹å‰,æŠŠç¯å¢ƒå˜é‡è®¾ç½®å¥½å°±å¯ä»¥äº†.</p>

<h1 id="å®ç°æ€è·¯-1">å®ç°æ€è·¯</h1>
<p>ä»£ç å¦‚ä¸‹:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
	    <span class="c1">//è·å–æœ¬åœ°ipåœ°å€</span>
        <span class="nc">InetAddress</span> <span class="n">address</span> <span class="o">=</span> <span class="n">getAddress</span><span class="o">();</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">address</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">//è®¾ç½®ç¯å¢ƒå˜é‡</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="s">"local.ip"</span><span class="o">,</span><span class="s">"127.0.0.1"</span><span class="o">);</span>
        <span class="o">}</span><span class="k">else</span><span class="o">{</span>
            <span class="c1">//è®¾ç½®ç¯å¢ƒå˜é‡</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="s">"local.ip"</span><span class="o">,</span><span class="n">address</span><span class="o">.</span><span class="na">getHostAddress</span><span class="o">());</span>
        <span class="o">}</span>

        <span class="nc">SpringApplication</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="nc">StreamApplication</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">args</span><span class="o">);</span>
	<span class="o">}</span>
<span class="c1">//è·å–æœ¬æœºipåœ°å€	</span>
<span class="kd">private</span> <span class="kd">static</span> <span class="nc">InetAddress</span> <span class="nf">getAddress</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="k">for</span> <span class="o">(</span><span class="nc">Enumeration</span><span class="o">&lt;</span><span class="nc">NetworkInterface</span><span class="o">&gt;</span> <span class="n">interfaces</span> <span class="o">=</span> <span class="nc">NetworkInterface</span><span class="o">.</span><span class="na">getNetworkInterfaces</span><span class="o">();</span> <span class="n">interfaces</span><span class="o">.</span><span class="na">hasMoreElements</span><span class="o">();)</span> <span class="o">{</span>
                <span class="nc">NetworkInterface</span> <span class="n">networkInterface</span> <span class="o">=</span> <span class="n">interfaces</span><span class="o">.</span><span class="na">nextElement</span><span class="o">();</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">networkInterface</span><span class="o">.</span><span class="na">isLoopback</span><span class="o">()</span> <span class="o">||</span> <span class="n">networkInterface</span><span class="o">.</span><span class="na">isVirtual</span><span class="o">()</span> <span class="o">||</span> <span class="o">!</span><span class="n">networkInterface</span><span class="o">.</span><span class="na">isUp</span><span class="o">())</span> <span class="o">{</span>
                    <span class="k">continue</span><span class="o">;</span>
                <span class="o">}</span>
                <span class="nc">Enumeration</span><span class="o">&lt;</span><span class="nc">InetAddress</span><span class="o">&gt;</span> <span class="n">addresses</span> <span class="o">=</span> <span class="n">networkInterface</span><span class="o">.</span><span class="na">getInetAddresses</span><span class="o">();</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">addresses</span><span class="o">.</span><span class="na">hasMoreElements</span><span class="o">())</span> <span class="o">{</span>
                    <span class="k">return</span> <span class="n">addresses</span><span class="o">.</span><span class="na">nextElement</span><span class="o">();</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SocketException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
    <span class="o">}</span>	
	
</code></pre></div></div>
<p>ymlé…ç½®å¦‚ä¸‹</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">spring</span><span class="pi">:</span>
  <span class="na">application</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">zzwtec-stream</span>
  <span class="na">cloud</span><span class="pi">:</span>
    <span class="na">stream</span><span class="pi">:</span>
      <span class="na">bindings</span><span class="pi">:</span>
        <span class="na">log_data_channel</span><span class="pi">:</span>
          <span class="na">destination</span><span class="pi">:</span> <span class="s">mq_sys_log_data</span>
          <span class="na">contentType</span><span class="pi">:</span> <span class="s">application/json</span>
          <span class="na">group</span><span class="pi">:</span> <span class="s">sysLogData</span>
        <span class="na">log_status_channel</span><span class="pi">:</span>
          <span class="na">destination</span><span class="pi">:</span> <span class="s">mq_sys_log_data</span>
          <span class="na">contentType</span><span class="pi">:</span> <span class="s">application/json</span>
          <span class="na">group</span><span class="pi">:</span> <span class="s">${local.ip}</span> <span class="c1">#è·å–åç§°ä¸ºlocal.ipçš„ç¯å¢ƒå˜é‡</span>
        <span class="na">data_into_redis_channel</span><span class="pi">:</span>
          <span class="na">destination</span><span class="pi">:</span> <span class="s">mq_stream_data</span>
          <span class="na">contentType</span><span class="pi">:</span> <span class="s">application/json</span>
          <span class="na">group</span><span class="pi">:</span> <span class="s">streamIntoRedis</span>
        <span class="na">data_into_database_channel</span><span class="pi">:</span>
          <span class="na">destination</span><span class="pi">:</span> <span class="s">mq_stream_data</span>
          <span class="na">contentType</span><span class="pi">:</span> <span class="s">application/json</span>
          <span class="na">group</span><span class="pi">:</span> <span class="s">streamIntoDatabase</span>

</code></pre></div></div>

<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>é€šè¿‡ä»¥ä¸Šçš„æ–¹å¼ymlå°±å¯ä»¥è·å–æœ¬åœ°ipåœ°å€äº†,å“,è¿˜æ˜¯å¯¹springè¿™ä¸ªæ¡†æ¶ä¸å¤ªç†Ÿæ‚‰å‘€,ä¹‹å‰æˆ‘å±…ç„¶ä¸çŸ¥é“è¿˜å¯ä»¥è¯»å–ç¯å¢ƒå˜é‡.emmmmmmmè¿˜è¦å¤šå­¦å­¦,ä¸ç„¶è·Ÿä¸ä¸Šå†å²çš„è¿›ç¨‹.</p>
:ET